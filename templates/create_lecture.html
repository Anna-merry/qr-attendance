<!-- templates/create_lecture.html -->
{% extends "base.html" %}

{% block title %}Создать занятие — QR-Сканер{% endblock %}

{% block header_content %}
<div class="nav-buttons">
    <a href="{{ url_for('lectures') }}" class="btn btn-secondary">← Назад к списку</a>
</div>
{% endblock %}

{% block content %}
<div class="auth-container" style="max-width: 600px; margin: 30px auto;">
    <h2 class="text-center mb-4">Создать занятие</h2>

    <form method="POST" class="auth-form">
        <div class="form-group">
            <label class="form-label">Предмет</label>
            <input type="text" name="subject" class="form-input" required
                   value="{{ request.form.subject or '' }}">
        </div>

        <div class="form-group">
            <label class="form-label">Группа</label>
            <input type="text" name="group" class="form-input" required
                   value="{{ request.form.group or '' }}">
        </div>

        <div class="form-group">
            <label class="form-label">Дата</label>
            <input type="date" name="date" class="form-input" required
                   value="{{ request.form.date or today.strftime('%Y-%m-%d') }}">
        </div>

        <div class="form-group">
            <label class="form-label">Время начала</label>
            <input type="time" name="time" class="form-input" required
                   value="{{ request.form.time or '09:00' }}">
        </div>

        <button type="submit" class="submit-btn">Создать занятие</button>
    </form>

    <!-- Flash-сообщения (ошибки и успехи) -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div style="margin-top: 20px;">
                {% for category, message in messages %}
                    <div style="
                        padding: 10px;
                        border-radius: 4px;
                        margin-bottom: 10px;
                        background-color: {% if category == 'error' %}#ffebee{% else %}#e8f5e9{% endif %};
                        color: {% if category == 'error' %}#c62828{% else %}#2e7d32{% endif %};
                        border-left: 4px solid {% if category == 'error' %}#e57373{% else %}#81c784{% endif %};
                    ">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
</div>
{% endblock %}