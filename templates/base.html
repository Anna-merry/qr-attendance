<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}QR-Сканер{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        {% if current_user.is_authenticated %}
        <!-- Единая шапка для всех страниц -->
        <div class="header">
            <div class="logo" onclick="window.location.href='/'">
                <img src="{{ url_for('static', filename='images/qr_logo.png') }}" alt="QR Logo">
                <h1>QR-Сканер</h1>
            </div>
             {% if current_user.is_authenticated %}
                <div class="nav-menu">
                    {% set current_page = request.endpoint %}

                    {% if current_user.role == 'teacher' %}
                        <!-- Навигация для преподавателя -->
                        <div class="nav-item {% if current_page == 'lectures' %}active{% endif %}" 
                             onclick="window.location.href='/teacher'">Главная</div>
                        <div class="nav-item {% if current_page == 'teacher_attendance' %}active{% endif %}" 
                             onclick="window.location.href='/teacher/attendance'">Посещаемость</div>
                        <div class="nav-item {% if current_page == 'teacher_schedule' %}active{% endif %}" 
                             onclick="window.location.href='/teacher/schedule'">Расписание</div>
                         <div class="nav-item" 
                             onclick="window.location.href='/logout'">Выйти</div>
                    {% elif current_user.role == 'student' %}
                        <!-- Навигация для студента -->
                        <div class="nav-item {% if current_page == 'student_dashboard' %}active{% endif %}" 
                             onclick="window.location.href='/student'">Главная</div>
                        <div class="nav-item {% if current_page == 'attendance' %}active{% endif %}" 
                             onclick="window.location.href='/attendance'">Посещаемость</div>
                        <div class="nav-item" 
                             onclick="window.location.href='/logout'">Выйти</div>
                        <div class="nav-item {% if current_page == 'scan' %}active{% endif %}" 
                             onclick="window.location.href='/scan'">Сканировать</div>
                    {% endif %}
                </div>
            {% endif %}
        </div>
        {% else %}
    <!-- Для неавторизованных — пустая шапка или только логотип -->
    <div class="header" style="justify-content: flex-start; padding: 16px 20px;">
        <div class="logo" onclick="window.location.href='/'">
            <img src="{{ url_for('static', filename='images/qr_logo.png') }}" alt="QR Logo">
            <h1>QR-Сканер</h1>
        </div>
    </div>
{% endif %}

        <!-- Основной контент страницы -->
        {% block content %}{% endblock %}
    </div>

</body>
</html>